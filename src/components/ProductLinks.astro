---
const { keyword } = Astro.props;

const amazonTag = import.meta.env.AMAZON_ASSOCIATE_TAG || 'blitz011-22';
const rakutenId = import.meta.env.RAKUTEN_AFFILIATE_ID || '50b8fe39.c32fe89a.50b8fe3a.60c7ccae';

const amazonUrl = `https://www.amazon.co.jp/s?k=${encodeURIComponent(keyword)}&tag=${amazonTag}`;
const rakutenUrl = `https://search.rakuten.co.jp/search/mall/${encodeURIComponent(keyword)}?scid=${rakutenId}`;
---

<div class="product-links">
  <div class="product-label">
    <span class="label-icon">üõçÔ∏è</span>
    <span class="label-text">Check Price: <strong>{keyword}</strong></span>
  </div>
  <div class="buttons">
    <a href={amazonUrl} target="_blank" rel="noopener noreferrer" class="btn amazon">
      <svg class="logo-amazon" viewBox="0 0 100 30" aria-label="Amazon">
        <path d="M13.2 12.8c-1.7-.8-3-1.2-4.1-1.2-1.8 0-3 .6-3.8 1.9-.3.5-.5 1-.6 1.8h-2c.1-4.7 3.5-7.3 7.8-7.3 2 0 4 .5 5.5 1.5 1.5 1 2.3 2.7 2.3 5v8.9c0 .5.1.7.3.7 0 0 .1 0 .2-.1V24c-.5.2-1.1.2-1.5.2-1.2 0-1.8-.7-1.9-1.9-1.2 1.3-3.1 2.1-5 2.1-3.2 0-5.6-2-5.6-5.2 0-3.3 2.4-5.2 6.5-5.5 2.4-.2 3.8-.6 3.8-1.4 0-1.1-1-1.6-1.9-1.6zm.5 5.7c0 .7-1 1-2.9 1.2-2 .2-3.1 1-3.1 2.5 0 1.5.9 2.5 2.6 2.5 1.7 0 3-.9 3.4-2.2v-4zM68.7 6.4h2.1v17.4h-2V22c-.9 1.5-2.6 2.3-4.5 2.3-3.6 0-6.1-2.9-6.1-7.1 0-4.1 2.5-7.1 6.1-7.1 1.9 0 3.6.9 4.4 2.3V6.4zm-2.1 10.7c0-2.9-1.5-5.1-4.2-5.1-2.7 0-4.2 2.2-4.2 5.1 0 2.9 1.5 5.1 4.2 5.1 2.8-.1 4.2-2.3 4.2-5.1zM93.3 6.4h2v7.1c.9-1.4 2.6-2.3 4.5-2.3 3.6 0 6.1 2.9 6.1 7.1 0 4.1-2.5 7.1-6.1 7.1-1.9 0-3.6-.9-4.5-2.3v2h-2V6.4zm8.5 7.7c-2.7 0-4.2 2.2-4.2 5.1 0 2.9 1.5 5.1 4.2 5.1 2.7 0 4.2-2.2 4.2-5.1-.1-2.9-1.5-5.1-4.2-5.1zM53.1 11.4l-1.9 3.2V24h-2.1V11.4h1.9l.2 1.9c.9-1.4 2.3-2.2 3.8-2.2 1 0 1.8.3 2.5.7l-.8 1.9c-.3-.2-.8-.4-1.3-.4-1.3-.1-2.3.8-2.3 2.7l-.1-4.6zM26 11.4h1.9v1.9c.9-1.4 2.6-2.3 4.5-2.3 3.6 0 6.1 2.9 6.1 7.1 0 4.1-2.5 7.1-6.1 7.1-1.9 0-3.6-.9-4.5-2.3v2H26V11.4zm8.4 7.7c-2.7 0-4.2 2.2-4.2 5.1 0 2.9 1.5 5.1 4.2 5.1 2.7 0 4.2-2.2 4.2-5.1 0-2.9-1.4-5.1-4.2-5.1zM79.5 24h-9l6.5-11.2h2.5L79.5 24zm-6.1-9.6L75 17.5l1.6-3.1h-3.2zM43.8 24h-2.1V11.4h1.9v1.8c.8-1.5 2.1-2.1 3.5-2.1 1.7 0 3.3.9 3.9 2.5.8-1.6 2.4-2.5 4.1-2.5 2.7 0 4.4 1.8 4.4 5.3V24h-2.1v-6.9c0-2.4-.9-3.4-2.5-3.4-1.6 0-3 .9-3.2 3.1V24h-2.1v-6.9c0-2.4-.9-3.4-2.5-3.4-1.6 0-3 .9-3.2 3.1V24z" fill="currentColor"></path>
        <path d="M98.9 25c-2.8 2-7 3.3-10.4 1.4-.4-.2-.5-.7-.2-1.1.2-.4.7-.4 1.1-.2 1.8 1 5.5 1.2 8.3-.9.3-.2.8-.2 1.1.2.3.4.3 1 .1.6zM22.6 27c13.7 3.2 27.2-2.3 30-3.8.3-.2.8-.2 1 .3.2.4 0 .9-.4 1.1-2.6 1.4-17.2 7.6-31.9 3.2-1.3-.3-1.6-.5-1.7-.8-.2-1 1.2-1.3 1.3-1.3.1 0 1.2.2 1.7 1.3z" fill="#ff9900"></path>
      </svg>
    </a>
    <a href={rakutenUrl} target="_blank" rel="noopener noreferrer" class="btn rakuten">
      <svg class="logo-rakuten" viewBox="0 0 100 30" aria-label="Rakuten">
        <path d="M22.5 4h5c5 0 8 3 8 7s-3 8-7 8h-3l5 7h-4.5l-4.5-7h-1.5v7h-4.5V4zm5 11.5c2.5 0 4-1.5 4-4.5s-1.5-4.5-4-4.5h-1v9h1zM40 18.5h4.5v-7h-4.5v7zm2.25-11c-1.5 0-2.5 1-2.5 2.5s1 2.5 2.5 2.5 2.5-1 2.5-2.5-1-2.5-2.5-2.5zM52 11h3l-3.5 7.5h-1L47 11h3l2.5 6 2.5-6zM66 14.5h-4.5c0 3 2 4 4.5 4 1.5 0 3-.5 3.5-1v3.5c-1 .5-2.5 1-4 1-5 0-8-3-8-8s3-8 8.5-8c5 0 8 3.5 8 8v1.5H66v-1zm0-3c0-1.5-1-2.5-2.5-2.5s-2.5 1-2.5 2.5H66zM77 7h3v2h-3v10h-3.5V9h-3V7h3V4h3.5v3zM85 11h3.5v3H85v4.5H82V14h-3.5v-3H82V7h3v4zM95 14h-5v4.5h-3.5V11h8.5v3z" fill="currentColor"></path>
        <circle cx="10" cy="15" r="8" fill="white" />
        <text x="10" y="20" font-family="serif" font-weight="bold" font-size="14" text-anchor="middle" fill="#BF0000">R</text>
      </svg>
    </a>
  </div>
</div>

<style>
  .product-links {
    margin: var(--spacing-8) 0;
    padding: var(--spacing-6);
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-4);
    box-shadow: 0 4px 20px rgba(0,0,0,0.2); /* Container 3D ish */
  }

  .product-label {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
  }

  .label-text strong {
    color: var(--color-text-primary);
  }

  .buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-4);
  }

  /* Base Button Styles */
  .btn {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 60px;
    padding: 0 var(--spacing-4);
    border-radius: var(--radius-lg);
    text-decoration: none !important; /* Force remove underline */
    transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
    position: relative;
    top: 0;
  }

  /* Amazon Styles */
  .amazon {
    background: #FF9900; /* Amazon Yellow/Orange */
    color: #232F3E; /* Amazon Dark Blue Text */
    border-bottom: 5px solid #cc7a00; /* Darker orange for 3D bevel */
  }

  .amazon:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 20px rgba(255, 153, 0, 0.6); /* Yellow/Orange Glow */
    border-bottom: 5px solid #cc7a00; /* Maintain bevel */
  }

  .amazon:active {
    transform: translateY(2px);
    border-bottom: 0px solid transparent;
    margin-top: 5px; /* Offset the lost border to stay in place visually */
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
  }

  .logo-amazon {
    height: 32px;
    width: auto;
    fill: #232F3E; /* SVG Fill matches text color */
  }

  /* Rakuten Styles */
  .rakuten {
    background: #BF0000; /* Rakuten Red */
    color: white;
    border-bottom: 5px solid #8a0000; /* Darker red for 3D bevel */
  }

  .rakuten:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.6); /* Red Glow */
    border-bottom: 5px solid #8a0000;
  }

  .rakuten:active {
    transform: translateY(2px);
    border-bottom: 0px solid transparent;
    margin-top: 5px;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
  }

  .logo-rakuten {
    height: 28px;
    width: auto;
    fill: white;
  }

  @media (max-width: 640px) {
    .buttons {
      grid-template-columns: 1fr;
    }
  }
</style>
